<html lang="ru">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   TIRASHOP - Оставить отзыв
  </title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <style>
   body {
      font-family: 'Inter', sans-serif;
    }
    /* Star rating input styling */
    input[type="radio"] {
      display: none;
    }
    label.star {
      font-size: 2.5rem;
      color: #d1d5db; /* Tailwind gray-300 */
      cursor: pointer;
      transition: color 0.3s ease-in-out, transform 0.2s ease-in-out;
      will-change: color, transform;
    }
    input[type="radio"]:checked ~ label.star,
    label.star:hover,
    label.star:hover ~ label.star {
      color: #fbbf24; /* Tailwind amber-400 */
      transform: scale(1.2);
    }
    /* Reverse star order for correct hover effect */
    .stars {
      direction: rtl;
      display: flex;
      justify-content: center;
      gap: 0.25rem;
    }
    .stars label.star:hover,
    .stars label.star:hover ~ label.star {
      color: #fbbf24;
    }

    /* Animated store name */
    .store-name {
      font-weight: 700;
      font-size: 2.25rem; /* text-4xl */
      color: #2563eb; /* blue-600 */
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      user-select: none;
      transition: color 0.3s ease, transform 0.3s ease;
      will-change: color, transform;
    }
    .store-name:hover {
      color: #1d4ed8; /* blue-700 */
      transform: scale(1.1) rotate(-3deg);
      text-shadow: 0 0 8px rgba(37, 99, 235, 0.7);
    }
    .store-icon {
      color: #2563eb;
      transition: transform 0.4s ease;
      will-change: transform;
    }
    .store-name:hover .store-icon {
      transform: rotate(20deg) scale(1.3);
      color: #1d4ed8;
      filter: drop-shadow(0 0 4px #1d4ed8);
    }

    /* Button hover animation */
    button[type="submit"] {
      will-change: transform, box-shadow;
    }
    button[type="submit"]:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.5), 0 4px 6px -2px rgba(59, 130, 246, 0.3);
    }
    button[type="submit"]:focus-visible {
      outline-offset: 4px;
      outline: 3px solid #3b82f6;
      outline-radius: 0.5rem;
    }

    /* Smooth fade-in animation for main content */
    @keyframes fadeInUp {
      0% {
        opacity: 0;
        transform: translateY(20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    main {
      animation: fadeInUp 0.8s ease forwards;
    }

    /* Textarea focus animation */
    textarea:focus {
      animation: pulseBorder 1.5s infinite alternate;
    }
    @keyframes pulseBorder {
      0% {
        border-color: #3b82f6;
        box-shadow: 0 0 8px #3b82f6;
      }
      100% {
        border-color: #60a5fa;
        box-shadow: 0 0 16px #60a5fa;
      }
    }

    /* Captcha styling */
    .captcha-container {
      margin-top: 1rem;
      text-align: center;
    }
    #captcha-question {
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    #captcha-input {
      width: 100px;
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 0.375rem;
      text-align: center;
      font-size: 1rem;
      font-weight: 600;
    }
    #captcha-error {
      color: #dc2626;
      font-size: 0.875rem;
      margin-top: 0.25rem;
      display: none;
    }
  </style>
 </head>
 <body class="bg-gray-50 min-h-screen flex flex-col">
  <header class="bg-white shadow-md">
   <div class="max-w-4xl mx-auto px-6 py-6 flex justify-center">
    <h1 class="store-name select-none" tabindex="0" role="banner" aria-label="Название магазина TIRASHOP">
     TIRASHOP
     <i aria-hidden="true" class="fas fa-shopping-bag store-icon"></i>
    </h1>
   </div>
  </header>
  <main class="flex-grow max-w-3xl mx-auto px-6 py-12 w-full">
   <h2 class="text-4xl font-extrabold text-gray-900 mb-8 text-center tracking-tight animate-fadeInUp">
    Оставить отзыв о товаре
   </h2>
   <section aria-labelledby="review-form-title" class="bg-white rounded-xl shadow-lg p-8 max-w-xl mx-auto transition-transform duration-500 ease-in-out hover:scale-[1.02] hover:shadow-2xl">
    <h3 class="text-2xl font-semibold text-gray-800 mb-6 text-center select-none" id="review-form-title">
     Ваш отзыв для TIRASHOP
    </h3>
    <form class="space-y-6" id="review-form" novalidate="">
     <fieldset aria-label="Оценка товара по звёздам" class="stars" role="radiogroup" aria-required="true" tabindex="0">
      <input id="star5" name="rating" type="radio" value="5"/>
      <label class="star" for="star5" title="5 звёзд" aria-label="5 звёзд">
       <i class="fas fa-star"></i>
      </label>
      <input id="star4" name="rating" type="radio" value="4"/>
      <label class="star" for="star4" title="4 звезды" aria-label="4 звезды">
       <i class="fas fa-star"></i>
      </label>
      <input id="star3" name="rating" type="radio" value="3"/>
      <label class="star" for="star3" title="3 звезды" aria-label="3 звезды">
       <i class="fas fa-star"></i>
      </label>
      <input id="star2" name="rating" type="radio" value="2"/>
      <label class="star" for="star2" title="2 звезды" aria-label="2 звезды">
       <i class="fas fa-star"></i>
      </label>
      <input id="star1" name="rating" type="radio" value="1"/>
      <label class="star" for="star1" title="1 звезда" aria-label="1 звезда">
       <i class="fas fa-star"></i>
      </label>
     </fieldset>
     <div>
      <label class="block text-gray-700 font-semibold mb-2" for="review-text">
       Текст отзыва
      </label>
      <textarea aria-required="true" class="w-full rounded-md border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-300 p-3 resize-none transition shadow-sm" id="review-text" name="review-text" placeholder="Поделитесь своим мнением о товаре..." required rows="5"></textarea>
      <p class="text-red-600 text-sm mt-1 hidden" id="review-text-error" role="alert">
       Пожалуйста, введите текст отзыва.
      </p>
     </div>

     <div class="captcha-container">
      <div id="captcha-question" aria-live="polite"></div>
      <input type="text" id="captcha-input" aria-label="Ответ на проверочный вопрос" autocomplete="off"/>
      <p id="captcha-error" role="alert">Неверный ответ, попробуйте снова.</p>
     </div>

     <button aria-label="Отправить отзыв" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg shadow-md transition focus:outline-none focus:ring-4 focus:ring-blue-300" type="submit">
      Отправить отзыв
     </button>
    </form>
   </section>
  </main>
  <footer class="bg-white border-t border-gray-200 py-6 mt-12">
   <div class="max-w-4xl mx-auto px-6 text-center text-gray-600 text-sm select-none">
    © 2025 TIRASHOP. Все права защищены.
   </div>
  </footer>
  <script>
   // Защита капчей - простой пример с вопросом
   const captchaQuestionElem = document.getElementById('captcha-question');
   const captchaInput = document.getElementById('captcha-input');
   const captchaError = document.getElementById('captcha-error');

   // Пример вопроса и правильного ответа
   const captchaData = {
     question: 'Сколько будет 3 + 4?',
     answer: '7'
   };

   captchaQuestionElem.textContent = captchaData.question;

   const form = document.getElementById('review-form');
   const reviewText = document.getElementById('review-text');
   const reviewTextError = document.getElementById('review-text-error');

   form.addEventListener('submit', async (e) => {
     e.preventDefault();

     // Validate rating
     const rating = form.rating.value;
     if (!rating) {
       alert('Пожалуйста, выберите количество звёзд для оценки.');
       return;
     }

     // Validate review text
     if (!reviewText.value.trim()) {
       reviewTextError.classList.remove('hidden');
       reviewText.focus();
       return;
     } else {
       reviewTextError.classList.add('hidden');
     }

     // Validate captcha
     if (captchaInput.value.trim() !== captchaData.answer) {
       captchaError.style.display = 'block';
       captchaInput.focus();
       return;
     } else {
       captchaError.style.display = 'none';
     }

     // Prepare data to send
     const formData = {
       rating,
       review: reviewText.value.trim(),
       date: new Date().toISOString()
     };

     // Отправляем на Google Apps Script (пример)
     // Замените URL на ваш скрипт Google Apps Script
     const scriptURL = 'https://script.google.com/macros/s/AKfycbxoukqby9UC4wIFXzua6lWSEKMc-OigZa5CdsvjqcU0bbLYg_tWn854fMXwXGJhM4S-KQ/exec';

     try {
       const response = await fetch(scriptURL, {
         method: 'POST',
         mode: 'cors',
         headers: {
           'Content-Type': 'application/json'
         },
         body: JSON.stringify(formData)
       });

       if (response.ok) {
         alert('Спасибо за ваш отзыв! Он успешно отправлен.');
         form.reset();
       } else {
         alert('Ошибка при отправке отзыва. Попробуйте позже.');
       }
     } catch (error) {
       alert('Ошибка сети. Попробуйте позже.');
       console.error(error);
     }
   });
  </script>
 </body>
</html>
